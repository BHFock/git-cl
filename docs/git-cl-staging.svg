<?xml version="1.0" encoding="UTF-8"?>
<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 980 510"
  width="980"
  height="510"
>

  <!-- =======================
       Styles
       ======================= -->
  <style>
    .heading {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      font-size: 17px;
      font-weight: 600;
      fill: #374151;
    }

    .step-label {
      font-family: system-ui, sans-serif;
      font-size: 14px;
      fill: #6b7280;
      font-weight: 500;
    }

    .label {
      font-family: system-ui, sans-serif;
      font-size: 14px;
      fill: #374151;
      font-weight: 600;
    }

    .file {
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size: 13px;
      fill: #111827;
    }

    .status-m {
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size: 13px;
      fill: #d97706;
    }

    .status-staged {
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size: 13px;
      fill: #059669;
    }

    .cmd {
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size: 13px;
      fill: #7c3aed;
      font-weight: 600;
    }

    .cmd-grey {
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size: 13px;
      fill: #6b7280;
      font-weight: 600;
    }

    .commit-file {
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size: 12px;
      fill: #065f46;
    }

    .empty-label {
      font-family: system-ui, sans-serif;
      font-size: 12px;
      fill: #9ca3af;
      font-style: italic;
    }

    .muted {
      opacity: 0.4;
    }

    .muted-text {
      font-family: system-ui, sans-serif;
      font-size: 12px;
      fill: #9ca3af;
      font-style: italic;
    }
  </style>

  <!-- =======================
       Drop Shadow
       ======================= -->
  <defs>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="2" stdDeviation="3"
                    flood-color="#000" flood-opacity="0.1"/>
    </filter>
  </defs>

  <!-- =======================
       Outer Background
       ======================= -->
  <rect x="0" y="0" width="980" height="510" rx="12"
        fill="#f8fafc" stroke="#e2e8f0" stroke-width="1"/>

  <!-- =====================================================================
       STEP 1: Working Directory with empty Staging Area
       ===================================================================== -->
  <text x="35" y="28" class="step-label">Step 1: Organise into changelists</text>

  <!-- Working Directory -->
  <rect x="20" y="42" width="210" height="250" rx="12"
        fill="#ffffff" stroke="#e5e7eb" filter="url(#shadow)"/>
  <text x="35" y="65" class="heading">Working Directory</text>

  <!-- Changelist: preprocessing -->
  <rect x="32" y="80" width="170" height="80" rx="8"
        fill="#e8f0ff" stroke="#5b8def"/>
  <text x="44" y="99" class="label">preprocessing</text>
  <text x="44" y="118">
    <tspan class="status-m">[ M]</tspan>
    <tspan class="file" dx="3">clean_data.py</tspan>
  </text>
  <text x="44" y="136">
    <tspan class="status-m">[ M]</tspan>
    <tspan class="file" dx="3">filters.py</tspan>
  </text>
  <text x="44" y="154">
    <tspan class="status-m">[ M]</tspan>
    <tspan class="file" dx="3">math.py</tspan>
  </text>

  <!-- Changelist: visualisation -->
  <rect x="32" y="168" width="170" height="58" rx="8"
        fill="#e8f0ff" stroke="#5b8def"/>
  <text x="44" y="187" class="label">visualisation</text>
  <text x="44" y="206">
    <tspan class="status-m">[ M]</tspan>
    <tspan class="file" dx="3">plot.py</tspan>
  </text>
  <text x="44" y="222">
    <tspan class="status-m">[ M]</tspan>
    <tspan class="file" dx="3">charts.py</tspan>
  </text>

  <!-- Changelist: tests -->
  <rect x="32" y="234" width="170" height="40" rx="8"
        fill="#e8f0ff" stroke="#5b8def"/>
  <text x="44" y="253" class="label">tests</text>
  <text x="44" y="269">
    <tspan class="status-m">[ M]</tspan>
    <tspan class="file" dx="3">test.py</tspan>
  </text>

  <!-- Empty Staging Area -->
  <rect x="20" y="305" width="210" height="45" rx="10"
        fill="#f9fafb" stroke="#e5e7eb" stroke-dasharray="4,2"/>
  <text x="35" y="332" class="heading">Staging Area</text>
  <text x="155" y="332" class="empty-label">(empty)</text>

  <!-- Empty Committed -->
  <rect x="20" y="362" width="210" height="45" rx="10"
        fill="#f9fafb" stroke="#e5e7eb" stroke-dasharray="4,2"/>
  <text x="35" y="382" class="heading">Committed</text>
  <text x="140" y="382" class="empty-label">(no new</text>
  <text x="140" y="396" class="empty-label">commits)</text>

  <!-- =======================
       Arrow 1: git cl stage
       ======================= -->
  <line x1="245" y1="180" x2="325" y2="180" stroke="#7c3aed" stroke-width="2"/>
  <polygon points="330,180 320,174 320,186" fill="#7c3aed"/>
  
  <text x="287" y="165" text-anchor="middle" class="cmd">git cl stage</text>
  <text x="287" y="200" text-anchor="middle" class="cmd">preprocessing</text>

  <!-- =====================================================================
       STEP 2: Staging Area with staged changelist
       ===================================================================== -->
  <text x="365" y="28" class="step-label">Step 2: Stage one changelist</text>

  <!-- Working Directory -->
  <rect x="350" y="42" width="210" height="250" rx="12"
        fill="#ffffff" stroke="#e5e7eb" filter="url(#shadow)"/>
  <text x="365" y="65" class="heading">Working Directory</text>

  <!-- Changelist: preprocessing (moved out, shown faded) -->
  <rect x="362" y="80" width="170" height="80" rx="8"
        fill="#f9fafb" stroke="#d1d5db" stroke-dasharray="4,2"/>
  <text x="374" y="99" class="label muted">preprocessing</text>
  <text x="447" y="130" text-anchor="middle" class="muted-text">→ staged</text>

  <!-- Changelist: visualisation (remains) -->
  <rect x="362" y="168" width="170" height="58" rx="8"
        fill="#e8f0ff" stroke="#5b8def"/>
  <text x="374" y="187" class="label">visualisation</text>
  <text x="374" y="206">
    <tspan class="status-m">[ M]</tspan>
    <tspan class="file" dx="3">plot.py</tspan>
  </text>
  <text x="374" y="222">
    <tspan class="status-m">[ M]</tspan>
    <tspan class="file" dx="3">charts.py</tspan>
  </text>

  <!-- Changelist: tests (remains) -->
  <rect x="362" y="234" width="170" height="40" rx="8"
        fill="#e8f0ff" stroke="#5b8def"/>
  <text x="374" y="253" class="label">tests</text>
  <text x="374" y="269">
    <tspan class="status-m">[ M]</tspan>
    <tspan class="file" dx="3">test.py</tspan>
  </text>

  <!-- Staging Area with preprocessing - expanded to show files -->
  <rect x="350" y="305" width="210" height="115" rx="10"
        fill="#ecfdf5" stroke="#6ee7b7" filter="url(#shadow)"/>
  <text x="365" y="328" class="heading">Staging Area</text>

  <rect x="362" y="340" width="186" height="72" rx="6"
        fill="#d1fae5" stroke="#34d399"/>
  <text x="374" y="358" class="label">preprocessing</text>
  <text x="374" y="377">
    <tspan class="status-staged">[M ]</tspan>
    <tspan class="file" dx="3">clean_data.py</tspan>
  </text>
  <text x="374" y="393">
    <tspan class="status-staged">[M ]</tspan>
    <tspan class="file" dx="3">filters.py</tspan>
  </text>
  <text x="374" y="409">
    <tspan class="status-staged">[M ]</tspan>
    <tspan class="file" dx="3">math.py</tspan>
  </text>

  <!-- Empty Committed - adjusted position -->
  <rect x="350" y="432" width="210" height="45" rx="10"
        fill="#f9fafb" stroke="#e5e7eb" stroke-dasharray="4,2"/>
  <text x="365" y="452" class="heading">Committed</text>
  <text x="470" y="452" class="empty-label">(no new</text>
  <text x="470" y="466" class="empty-label">commits)</text>

  <!-- =======================
       Arrow 2: git commit
       ======================= -->
  <line x1="575" y1="180" x2="655" y2="180" stroke="#6b7280" stroke-width="2"/>
  <polygon points="660,180 650,174 650,186" fill="#6b7280"/>
  
  <text x="617" y="165" text-anchor="middle" class="cmd-grey">git commit</text>

  <!-- =====================================================================
       STEP 3: After Commit
       ===================================================================== -->
  <text x="695" y="28" class="step-label">Step 3: After commit</text>

  <!-- Working Directory -->
  <rect x="680" y="42" width="210" height="250" rx="12"
        fill="#ffffff" stroke="#e5e7eb" filter="url(#shadow)"/>
  <text x="695" y="65" class="heading">Working Directory</text>

  <!-- Changelist: visualisation (remains) -->
  <rect x="692" y="80" width="170" height="58" rx="8"
        fill="#e8f0ff" stroke="#5b8def"/>
  <text x="704" y="99" class="label">visualisation</text>
  <text x="704" y="118">
    <tspan class="status-m">[ M]</tspan>
    <tspan class="file" dx="3">plot.py</tspan>
  </text>
  <text x="704" y="134">
    <tspan class="status-m">[ M]</tspan>
    <tspan class="file" dx="3">charts.py</tspan>
  </text>

  <!-- Changelist: tests (remains) -->
  <rect x="692" y="146" width="170" height="40" rx="8"
        fill="#e8f0ff" stroke="#5b8def"/>
  <text x="704" y="165" class="label">tests</text>
  <text x="704" y="181">
    <tspan class="status-m">[ M]</tspan>
    <tspan class="file" dx="3">test.py</tspan>
  </text>

  <!-- Empty Staging Area -->
  <rect x="680" y="305" width="210" height="45" rx="10"
        fill="#f9fafb" stroke="#e5e7eb" stroke-dasharray="4,2"/>
  <text x="695" y="332" class="heading">Staging Area</text>
  <text x="815" y="332" class="empty-label">(empty)</text>

  <!-- Committed with preprocessing -->
  <rect x="680" y="362" width="210" height="60" rx="10"
        fill="#d1fae5" stroke="#34d399" filter="url(#shadow)"/>
  <text x="695" y="385" class="heading">Committed</text>
  <text x="695" y="405" class="commit-file">clean_data.py, filters.py,</text>
  <text x="695" y="418" class="commit-file">math.py</text>

  <!-- =======================
       Bottom annotation
       ======================= -->
  <text x="35" y="495" class="muted-text">
    Changelists organise your working directory. Only the staged changelist is committed — others remain ready for the next commit.
  </text>

</svg>
